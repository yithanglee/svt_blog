{"version":3,"file":"_page.svelte-124da364.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(main)/devices/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, v as validate_component } from \"../../../../chunks/ssr.js\";\nimport { P as PHX_HTTP_PROTOCOL, a as PHX_ENDPOINT } from \"../../../../chunks/constants.js\";\nimport { a as goto, p as postData } from \"../../../../chunks/index3.js\";\nimport { D as Datatable } from \"../../../../chunks/Datatable.js\";\nimport { S as SimpleTable } from \"../../../../chunks/SimpleTable.js\";\nfunction showCondition2(data) {\n  var bool = false;\n  if (data.outlet != null) {\n    if (data.outlet.payment_gateway == \"fiuu\") {\n      return true;\n    }\n  }\n  return bool;\n}\nfunction showCondition(data) {\n  var bool = false;\n  if (data.outlet != null) {\n    return true;\n  }\n  return bool;\n}\nfunction websiteHref(data) {\n  console.log(data);\n  return \"https://iot.djtech4u.com?d=\" + data.name + \"&location=\" + (data.outlet == null ? \"none\" : data.outlet.subdomain || \"none\");\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  let inputs = data.inputs;\n  var url = PHX_HTTP_PROTOCOL + PHX_ENDPOINT;\n  function showWebsite(data2, checkPage, confirmModal) {\n    goto(\"https://iot.djtech4u.com?d=\" + data2.name + \"&location=\" + data2.outlet.subdomain);\n  }\n  function controlDevice(data2, checkPage, confirmModal) {\n    goto(\"/devices/\" + data2.id);\n  }\n  function regenQr(data2, checkPage, confirmModal) {\n    console.log(data2);\n    console.log(\"transfer approved!\");\n    confirmModal(\n      true,\n      `\n\n        <span class=\"\">Are you sure to regenerate QR?</span>`,\n      () => {\n        postData(\n          {\n            scope: \"gen_static_qr\",\n            id: data2.id,\n            name: data2.name\n          },\n          {\n            endpoint: url + \"/svt_api/webhook\",\n            successCallback: (e) => {\n              console.log(e);\n              checkPage();\n            }\n          }\n        );\n      }\n    );\n  }\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  return `${validate_component(Datatable, \"Datatable\").$$render(\n    $$result,\n    {\n      data: {\n        appendQueries: { organization_id: data.organization_id },\n        showNew: true,\n        canDelete: true,\n        inputs,\n        search_queries: [\"a.name\"],\n        model: \"Device\",\n        preloads: [\"outlet\", \"executor_board\", \"organization\"],\n        buttons: [\n          {\n            name: \"Website\",\n            onclickFn: showWebsite,\n            href: websiteHref,\n            showCondition\n          },\n          {\n            name: \"Control\",\n            onclickFn: controlDevice\n          },\n          {\n            name: \"Regen QR\",\n            onclickFn: regenQr,\n            showCondition: showCondition2\n          }\n        ],\n        customCols: [\n          {\n            title: \"General\",\n            list: [\n              \"id\",\n              \"name\",\n              \"short_name\",\n              \"default_io_pin\",\n              \"format\",\n              \"cloridge_device_uid\",\n              {\n                label: \"organization_id\",\n                hidden: true,\n                value: data.organization_id\n              },\n              {\n                label: \"executor_board_id\",\n                selection: \"Device\",\n                customCols: null,\n                search_queries: [\"a.name\"],\n                newData: \"name\",\n                title_key: \"name\"\n              },\n              {\n                label: \"outlet_id\",\n                selection: \"Outlet\",\n                customCols: null,\n                search_queries: [\"a.name|a.organization_id=\" + data.organization_id],\n                newData: \"name\",\n                title_key: \"name\"\n              },\n              {\n                label: \"organization_id\",\n                selection: \"Organization\",\n                customCols: null,\n                search_queries: [\"a.name\"],\n                newData: \"name\",\n                title_key: \"name\"\n              },\n              { label: \"is_cloridge\", boolean: true },\n              { label: \"record_wifi_time\", boolean: true },\n              { label: \"skip_first\", boolean: true },\n              { label: \"is_active\", boolean: true }\n            ]\n          }\n        ],\n        columns: [\n          { label: \"ID\", data: \"id\" },\n          { label: \"Name\", data: \"name\" },\n          {\n            label: \"Timestamp\",\n            data: \"inserted_at\",\n            formatDateTime: true,\n            offset: 8\n          },\n          {\n            label: \"Status\",\n            data: \"is_active\",\n            isBadge: true,\n            color: [{ key: \"false\", value: \"pink\" }, { key: \"true\", value: \"green\" }]\n          },\n          // { label: 'User', data: 'username', through: ['user'] },\n          {\n            label: \"Outlet\",\n            data: \"name\",\n            through: [\"outlet\"]\n          }\n        ]\n      }\n    },\n    {},\n    {}\n  )} <div class=\"mt-4\">${validate_component(SimpleTable, \"SimpleTable\").$$render(\n    $$result,\n    {\n      title: \"Monthly Outlet Transactions (RM)\",\n      description: \"\",\n      data: {\n        apiData: {\n          id: data.id,\n          organization_id: data.organization_id,\n          year_month: data.yearMonth\n        },\n        buttons: [],\n        scope: \"current_month_outlet_trx_only_days\",\n        columns: data.columns\n      }\n    },\n    {},\n    {}\n  )}</div> <div class=\"mt-4\">${validate_component(SimpleTable, \"SimpleTable\").$$render(\n    $$result,\n    {\n      title: \"Monthly Outlet Transactions (RM) Prev 1 Month\",\n      description: \"\",\n      data: {\n        apiData: {\n          id: data.id,\n          organization_id: data.organization_id,\n          year_month: data.prevYearMonth\n        },\n        buttons: [],\n        scope: \"current_month_outlet_trx_only_days\",\n        columns: data.columns\n      }\n    },\n    {},\n    {}\n  )}</div> <div class=\"mt-4\">${validate_component(SimpleTable, \"SimpleTable\").$$render(\n    $$result,\n    {\n      title: \"Monthly Outlet Transactions (RM) Prev 2 Month\",\n      description: \"\",\n      data: {\n        apiData: {\n          id: data.id,\n          organization_id: data.organization_id,\n          year_month: data.prevYear2Month\n        },\n        buttons: [],\n        scope: \"current_month_outlet_trx_only_days\",\n        columns: data.columns\n      }\n    },\n    {},\n    {}\n  )}</div>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}