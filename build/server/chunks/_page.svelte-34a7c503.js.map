{"version":3,"file":"_page.svelte-34a7c503.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(main)/devices/_id_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, o as onDestroy, v as validate_component, h as escape } from \"../../../../../chunks/ssr.js\";\nimport { B as Badge, M as Modal, F as FormInput } from \"../../../../../chunks/DataCell.js\";\nimport { B as Button } from \"../../../../../chunks/Input.js\";\n/* empty css                                                             */import { S as SimpleTable } from \"../../../../../chunks/SimpleTable.js\";\nimport { D as Datatable } from \"../../../../../chunks/Datatable.js\";\nimport \"phoenix\";\nimport { p as postData } from \"../../../../../chunks/index3.js\";\nimport { P as PHX_HTTP_PROTOCOL, a as PHX_ENDPOINT } from \"../../../../../chunks/constants.js\";\nconst _page_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \"#chartContainer.svelte-1qh3btm{width:100%;height:100%}\",\n  map: null\n};\nfunction filteredInput(key) {\n  return null;\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  var url = PHX_HTTP_PROTOCOL + PHX_ENDPOINT;\n  let { data } = $$props;\n  let device = data.device, channel, fdata = {\n    delay: 0.1,\n    value: 1,\n    format: \"pwm\",\n    hexData: \"\"\n  }, formModal = false;\n  console.info(device);\n  onDestroy(() => {\n    channel.leave();\n  });\n  function customCommand(data2, zcheckPage) {\n    console.log(\"do mar\");\n    console.log(data2);\n    fdata = data2;\n    formModal = true;\n  }\n  function sendCommand(data2, checkPage, confirmModal) {\n    console.log(data2);\n    console.log(\"transfer approved!\");\n    confirmModal(true, \"Are you sure to send this command?\", () => {\n      postData(\n        {\n          scope: \"start_pwm\",\n          format: data2.format,\n          id: data2.id,\n          name: device.name,\n          item_name: data2.name,\n          value: data2.value,\n          // reps\n          action: data2.action,\n          delay: data2.delay\n          // delay\n        },\n        {\n          endpoint: url + \"/svt_api/webhook\",\n          successCallback: () => {\n            checkPage();\n          }\n        }\n      );\n    });\n  }\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  $$result.css.add(css);\n  let $$settled;\n  let $$rendered;\n  do {\n    $$settled = true;\n    $$rendered = `${validate_component(Badge, \"Badge\").$$render(\n      $$result,\n      {\n        style: \"position: absolute; right: 10vw;\",\n        class: \"text-large\",\n        large: \"true\",\n        color: \"yellow\"\n      },\n      {},\n      {\n        default: () => {\n          return `${escape(\"...\")}`;\n        }\n      }\n    )} ${validate_component(Modal, \"Modal\").$$render(\n      $$result,\n      {\n        size: \"lg\",\n        autoclose: false,\n        class: \"w-full\",\n        outsideclose: true,\n        open: formModal\n      },\n      {\n        open: ($$value) => {\n          formModal = $$value;\n          $$settled = false;\n        }\n      },\n      {\n        footer: () => {\n          return `${validate_component(Button, \"Button\").$$render($$result, {}, {}, {\n            default: () => {\n              return `Submit`;\n            }\n          })} `;\n        },\n        default: () => {\n          return `<form class=\"flex flex-col space-y-6\" id=\"currentForm\" action=\"#\"><h3 class=\"mb-4 text-xl font-medium text-gray-900 dark:text-white\" data-svelte-h=\"svelte-17fgs5\">Confirmation</h3> <p class=\"\" data-svelte-h=\"svelte-pdc0hi\">Are you sure to send these custom command?</p> <div class=\"p-4 bg-gray-50 rounded-lg dark:bg-gray-800 mt-4\" role=\"tabpanel\" aria-labelledby=\"id-tab\">${validate_component(FormInput, \"FormInput\").$$render(\n            $$result,\n            {\n              module: \"DeviceAction\",\n              key: { label: \"delay\", expose: true },\n              data: fdata,\n              input: filteredInput()\n            },\n            {},\n            {}\n          )} ${validate_component(FormInput, \"FormInput\").$$render(\n            $$result,\n            {\n              module: \"DeviceAction\",\n              key: { label: \"value\", expose: true },\n              data: fdata,\n              input: filteredInput()\n            },\n            {},\n            {}\n          )}${validate_component(FormInput, \"FormInput\").$$render(\n            $$result,\n            {\n              module: \"DeviceAction\",\n              key: { label: \"hexData\", expose: true },\n              data: fdata,\n              input: filteredInput()\n            },\n            {},\n            {}\n          )}${validate_component(FormInput, \"FormInput\").$$render(\n            $$result,\n            {\n              module: \"DeviceAction\",\n              key: { label: \"format\", expose: true },\n              data: fdata,\n              input: filteredInput()\n            },\n            {},\n            {}\n          )}</div></form>`;\n        }\n      }\n    )} ${validate_component(SimpleTable, \"SimpleTable\").$$render(\n      $$result,\n      {\n        title: \"Device - \" + device.name,\n        description: \"Manual control device with following commands\",\n        data: {\n          apiData: { id: data.id },\n          buttons: [\n            { name: \"Control\", onclickFn: sendCommand },\n            { name: \"Custom\", onclickFn: customCommand }\n          ],\n          scope: \"get_device_commands\",\n          columns: [{ label: \"Name\", data: \"name\" }]\n        }\n      },\n      {},\n      {}\n    )} ${device.qr_code_data ? `<div class=\"p-20 flex justify-center flex-col items-center gap-3\"> <div data-svelte-h=\"svelte-13ologc\"><h2 class=\"font-bold\">DuitNow Static QR</h2> <p>Print out this QRcode</p></div> <img src=\"${\"https://api.qrserver.com/v1/create-qr-code/?size=150x150&color=ec2f66&data=\" + escape(device.qr_code_data, true)}\" style=\"display: block;-webkit-user-select: none;margin: auto;background-color: hsl(0, 0%, 90%);transition: background-color 300ms;\"></div>` : ``} ${device.is_cloridge == false ? `<div id=\"chartContainer\" style=\"width: 80vw; height: 50vh;\" class=\"p-4 svelte-1qh3btm\"></div>` : ``} ${validate_component(Datatable, \"Datatable\").$$render(\n      $$result,\n      {\n        data: {\n          appendQueries: { device_id: device.id },\n          inputs: [],\n          search_queries: [\"a.uuid\"],\n          model: \"DeviceLog\",\n          preloads: [],\n          buttons: [],\n          customCols: [\n            {\n              title: \"General\",\n              list: [\"id\", \"name\", { label: \"is_active\", boolean: true }]\n            }\n          ],\n          columns: [\n            { label: \"ID\", data: \"id\" },\n            { label: \"Remarks\", data: \"remarks\" },\n            { label: \"Ref\", data: \"uuid\" },\n            {\n              label: \"Timestamp\",\n              data: \"inserted_at\",\n              formatDateTime: true,\n              offset: 8\n            }\n          ]\n        }\n      },\n      {},\n      {}\n    )}`;\n  } while (!$$settled);\n  return $$rendered;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}