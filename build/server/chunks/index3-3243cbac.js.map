{"version":3,"file":"index3-3243cbac.js","sources":["../../../.svelte-kit/adapter-node/chunks/index3.js"],"sourcesContent":["import { b as PHX_COOKIE, P as PHX_HTTP_PROTOCOL, a as PHX_ENDPOINT } from \"./constants.js\";\nimport { i as isToastOpen } from \"./toast.js\";\nimport Cookies from \"js-cookie\";\nfunction client_method(key) {\n  {\n    if (key === \"before_navigate\" || key === \"after_navigate\" || key === \"on_navigate\") {\n      return () => {\n      };\n    } else {\n      const name_lookup = {\n        disable_scroll_handling: \"disableScrollHandling\",\n        preload_data: \"preloadData\",\n        preload_code: \"preloadCode\",\n        invalidate_all: \"invalidateAll\"\n      };\n      return () => {\n        throw new Error(`Cannot call ${name_lookup[key] ?? key}(...) on the server`);\n      };\n    }\n  }\n}\nconst goto = /* @__PURE__ */ client_method(\"goto\");\nasync function postData(data, options) {\n  let res;\n  let cookieToken = Cookies.get(PHX_COOKIE);\n  let token = cookieToken != null ? cookieToken : \"empty\";\n  var default_options = {\n    method: \"POST\",\n    endpoint: PHX_HTTP_PROTOCOL + PHX_ENDPOINT\n  };\n  let headers = {\n    \"Authorization\": `Basic ${token}`,\n    \"Content-Type\": \"application/json\"\n  };\n  if (options.isFormData != null) {\n    delete headers[\"Content-Type\"];\n  }\n  const requestOptions = {\n    method: options.method != null ? options.method : \"POST\",\n    headers,\n    body: options.isFormData != null ? data : JSON.stringify(data)\n  };\n  console.info(requestOptions);\n  try {\n    const response = await fetch(options.endpoint != null ? options.endpoint : default_options.endpoint, requestOptions);\n    console.log();\n    if (response.status == 403) {\n      Cookies.remove(PHX_COOKIE);\n      goto(\"/\");\n    }\n    if (response.ok) {\n      res = await response.json();\n      console.log(res);\n      if (res.status != null) {\n        if (res.status == \"ok\") {\n          isToastOpen.notify(\"Submitted succesfully!\");\n        } else if (res.status == \"error\") {\n          if (res.reason != null) {\n            isToastOpen.notify(\"Error! \" + res.reason);\n          }\n        }\n      } else {\n        isToastOpen.notify(\"Submitted succesfully!\");\n      }\n      if (options.successCallback != null) {\n        options.successCallback();\n      }\n    } else {\n      isToastOpen.notify(\"Not Submitted!\");\n      let errorMessage = \"Failed to post data.\";\n    }\n  } catch (error) {\n    console.error(error);\n    isToastOpen.notify(\"Error!\");\n  }\n  return res;\n}\nfunction buildQueryString(data, parentKey = null) {\n  return Object.keys(data).map((key) => {\n    const nestedKey = parentKey ? `${parentKey}[${encodeURIComponent(key)}]` : encodeURIComponent(key);\n    if (data[key] != null && typeof data[key] === \"object\" && !Array.isArray(data[key])) {\n      return buildQueryString(data[key], nestedKey);\n    } else if (data[key] == null) {\n      return ``;\n    } else {\n      return `${nestedKey}=${encodeURIComponent(data[key])}`;\n    }\n  }).join(\"&\");\n}\nasync function genInputs(url, module) {\n  let items = [];\n  const apiData = {\n    scope: \"gen_inputs\",\n    module\n  };\n  const queryString = buildQueryString(apiData);\n  const response = await fetch(url + `/svt_api/webhook?${queryString}`, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (response.ok) {\n    let dataList = await response.json();\n    let keys = Object.keys(dataList);\n    keys.sort((a, b) => {\n      return a.localeCompare(b);\n    });\n    keys.forEach((v, i) => {\n      items.push({ key: v, value: dataList[v] });\n    });\n    console.log(items);\n    return items;\n  } else {\n    console.error(\"API request failed\");\n    return [];\n  }\n}\nexport {\n  goto as a,\n  buildQueryString as b,\n  genInputs as g,\n  postData as p\n};\n"],"names":[],"mappings":"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"}