{"version":3,"file":"_page.svelte-03ca12bb.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(main)/sales/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, v as validate_component } from \"../../../../chunks/ssr.js\";\nimport { P as PHX_HTTP_PROTOCOL, a as PHX_ENDPOINT } from \"../../../../chunks/constants.js\";\nimport { D as Datatable } from \"../../../../chunks/Datatable.js\";\nimport { p as postData } from \"../../../../chunks/index3.js\";\nfunction showCondition(data) {\n  var bool = false;\n  if (data.payment_webhook == null) {\n    return bool;\n  }\n  if (data.payment_ref != null) {\n    if (data.status != \"pending_payment\") {\n      return false;\n    }\n    bool = true;\n  }\n  return bool;\n}\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  let inputs = data.inputs;\n  var url = PHX_HTTP_PROTOCOL + PHX_ENDPOINT;\n  function approveTransfer(data2, checkPage, confirmModal) {\n    console.log(data2);\n    console.log(\"transfer approved!\");\n    confirmModal(true, \"Are you sure to manually approve this sale?\", () => {\n      postData(\n        {\n          scope: \"manual_approve_fpx\",\n          id: data2.payment_ref\n        },\n        {\n          endpoint: url + \"/svt_api/webhook\",\n          successCallback: () => {\n            checkPage();\n          }\n        }\n      );\n    });\n  }\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  return `${validate_component(Datatable, \"Datatable\").$$render(\n    $$result,\n    {\n      data: {\n        canDelete: true,\n        appendQueries: { organization_id: data.organization_id },\n        inputs,\n        join_statements: JSON.stringify([\n          // { corporate_account: 'corporate_account' },\n          { device: \"device\" }\n        ]),\n        search_queries: [\"a.id|b.name\"],\n        model: \"Sale\",\n        preloads: [\"device\", \"outlet\"],\n        buttons: [\n          {\n            name: \"Manual Approve (R M)\",\n            onclickFn: approveTransfer,\n            showCondition\n          }\n        ],\n        // { name: 'Manual Approve', onclickFn: approveTransfer2, showCondition: showCondition2 }\n        customCols: [\n          {\n            title: \"Order\",\n            list: [\n              \"id\",\n              {\n                label: \"status\",\n                selection: [\n                  \"processing\",\n                  \"sent\",\n                  \"pending_delivery\",\n                  \"complete\",\n                  \"cancelled\"\n                ]\n              },\n              \"remarks\"\n            ]\n          },\n          {\n            title: \"Others\",\n            list: [\"total_point_value\", { label: \"payment_webhook\", editor2: true }]\n          }\n        ],\n        columns: [\n          { label: \"ID\", data: \"id\" },\n          {\n            label: \"Outlet\",\n            data: \"name\",\n            through: [\"outlet\"]\n          },\n          {\n            label: \"Timestamp\",\n            data: \"inserted_at\",\n            formatDateTime: true,\n            offset: 8\n          },\n          // {\n          // \tlabel: 'Delivery Ref',\n          // \tdata: 'delivery_ref',\n          // \tsubtitle: { label: 'Courier', data: 'delivery_method' }\n          // },\n          { label: \"Sale Date\", data: \"sales_date\" },\n          { label: \"Ref\", data: \"payment_ref\" },\n          { label: \"Amount\", data: \"amount\" },\n          {\n            label: \"Status\",\n            data: \"status\",\n            isBadge: true,\n            color: [\n              { key: \"pending_payment\", value: \"yellow\" },\n              {\n                key: \"pending_confirmation\",\n                value: \"yellow\"\n              },\n              { key: \"processing\", value: \"blue\" },\n              { key: \"sent\", value: \"pink\" },\n              { key: \"pending_delivery\", value: \"purple\" },\n              { key: \"complete\", value: \"green\" }\n            ]\n          }\n        ]\n        // { label: 'User', data: 'username', through: ['user'] },\n        // { label: 'Sales Person', data: 'username', through: ['sales_person'] }\n      }\n      // {\n    },\n    {},\n    {}\n  )}`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}