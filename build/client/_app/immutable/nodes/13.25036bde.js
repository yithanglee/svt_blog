import{g as A,p as B}from"../chunks/index.0132ad10.js";import{b as j,c as E,g as R}from"../chunks/js.cookie.c4425e19.js";import{s as G,a as k,f as C,c as O,g as S,h as T,d as _,j as Y,i as b,o as L}from"../chunks/scheduler.a278e30b.js";import{S as X,i as J,b as y,d as D,m as $,a as w,t as z,e as M}from"../chunks/index.bc19f21f.js";import{D as K}from"../chunks/Datatable.7d61f8f1.js";import{S as P}from"../chunks/SimpleTable.05b48a41.js";const U=async({fetch:a,params:o,parent:c})=>{var l=await c();let s=j+E;var d=[{label:"Year",data:"year"},{label:"Outlet",data:"outlet"},{label:"Transactions",data:"transactions"},{label:"Amount (RM)",data:"amount"},{label:"Device",data:"device",subtitle:{label:"Long",data:"device_long"}}];function u(){var F=new Date;return new Date(F.getFullYear(),F.getMonth()+1,0).getDate()}u();for(var i=1;i<=31;i++){var p="Day "+i,t="day_"+i;d.push({label:p,data:t})}var r=new Date,m=r.getFullYear(),e=String(r.getMonth()+1).padStart(2,"0"),n=new Date,g=n.getFullYear(),h=String(n.getMonth()).padStart(2,"0"),f=new Date,v=f.getFullYear(),H=String(f.getMonth()-1).padStart(2,"0"),q=m+"-"+e,V=g+"-"+h,W=v+"-"+H;return console.log(q),{module:"Device",inputs:await A(s,"Device"),organization_id:l.user.organization_id,columns:d,yearMonth:q,prevYearMonth:V,prevYear2Month:W}},le=Object.freeze(Object.defineProperty({__proto__:null,load:U},Symbol.toStringTag,{value:"Module"}));function Z(a){let o,c,l,s,d,u,i,p,t,r,m;return o=new K({props:{data:{appendQueries:{organization_id:a[0].organization_id},showNew:!0,canDelete:!0,inputs:a[1],search_queries:["a.name"],model:"Device",preloads:["outlet","executor_board","organization"],buttons:[{name:"Website",onclickFn:a[2],href:Q,showCondition:N},{name:"Control",onclickFn:a[3]},{name:"Regen QR",onclickFn:a[4],showCondition:I}],customCols:[{title:"General",list:["id","name","short_name","default_io_pin","format","cloridge_device_uid",{label:"organization_id",hidden:!0,value:a[0].organization_id},{label:"executor_board_id",selection:"Device",customCols:null,search_queries:["a.name"],newData:"name",title_key:"name"},{label:"outlet_id",selection:"Outlet",customCols:null,search_queries:["a.name|a.organization_id="+a[0].organization_id],newData:"name",title_key:"name"},{label:"organization_id",selection:"Organization",customCols:null,search_queries:["a.name"],newData:"name",title_key:"name"},{label:"is_cloridge",boolean:!0},{label:"record_wifi_time",boolean:!0},{label:"skip_first",boolean:!0},{label:"is_active",boolean:!0}]}],columns:[{label:"ID",data:"id"},{label:"Name",data:"name"},{label:"Timestamp",data:"inserted_at",formatDateTime:!0,offset:8},{label:"Status",data:"is_active",isBadge:!0,color:[{key:"false",value:"pink"},{key:"true",value:"green"}]},{label:"Outlet",data:"name",through:["outlet"]}]}}}),s=new P({props:{title:"Monthly Outlet Transactions (RM)",description:"",data:{apiData:{id:a[0].id,organization_id:a[0].organization_id,year_month:a[0].yearMonth},buttons:[],scope:"current_month_outlet_trx_only_days",columns:a[0].columns}}}),i=new P({props:{title:"Monthly Outlet Transactions (RM) Prev 1 Month",description:"",data:{apiData:{id:a[0].id,organization_id:a[0].organization_id,year_month:a[0].prevYearMonth},buttons:[],scope:"current_month_outlet_trx_only_days",columns:a[0].columns}}}),r=new P({props:{title:"Monthly Outlet Transactions (RM) Prev 2 Month",description:"",data:{apiData:{id:a[0].id,organization_id:a[0].organization_id,year_month:a[0].prevYear2Month},buttons:[],scope:"current_month_outlet_trx_only_days",columns:a[0].columns}}}),{c(){y(o.$$.fragment),c=k(),l=C("div"),y(s.$$.fragment),d=k(),u=C("div"),y(i.$$.fragment),p=k(),t=C("div"),y(r.$$.fragment),this.h()},l(e){D(o.$$.fragment,e),c=O(e),l=S(e,"DIV",{class:!0});var n=T(l);D(s.$$.fragment,n),n.forEach(_),d=O(e),u=S(e,"DIV",{class:!0});var g=T(u);D(i.$$.fragment,g),g.forEach(_),p=O(e),t=S(e,"DIV",{class:!0});var h=T(t);D(r.$$.fragment,h),h.forEach(_),this.h()},h(){Y(l,"class","mt-4"),Y(u,"class","mt-4"),Y(t,"class","mt-4")},m(e,n){$(o,e,n),b(e,c,n),b(e,l,n),$(s,l,null),b(e,d,n),b(e,u,n),$(i,u,null),b(e,p,n),b(e,t,n),$(r,t,null),m=!0},p(e,[n]){const g={};n&1&&(g.data={appendQueries:{organization_id:e[0].organization_id},showNew:!0,canDelete:!0,inputs:e[1],search_queries:["a.name"],model:"Device",preloads:["outlet","executor_board","organization"],buttons:[{name:"Website",onclickFn:e[2],href:Q,showCondition:N},{name:"Control",onclickFn:e[3]},{name:"Regen QR",onclickFn:e[4],showCondition:I}],customCols:[{title:"General",list:["id","name","short_name","default_io_pin","format","cloridge_device_uid",{label:"organization_id",hidden:!0,value:e[0].organization_id},{label:"executor_board_id",selection:"Device",customCols:null,search_queries:["a.name"],newData:"name",title_key:"name"},{label:"outlet_id",selection:"Outlet",customCols:null,search_queries:["a.name|a.organization_id="+e[0].organization_id],newData:"name",title_key:"name"},{label:"organization_id",selection:"Organization",customCols:null,search_queries:["a.name"],newData:"name",title_key:"name"},{label:"is_cloridge",boolean:!0},{label:"record_wifi_time",boolean:!0},{label:"skip_first",boolean:!0},{label:"is_active",boolean:!0}]}],columns:[{label:"ID",data:"id"},{label:"Name",data:"name"},{label:"Timestamp",data:"inserted_at",formatDateTime:!0,offset:8},{label:"Status",data:"is_active",isBadge:!0,color:[{key:"false",value:"pink"},{key:"true",value:"green"}]},{label:"Outlet",data:"name",through:["outlet"]}]}),o.$set(g);const h={};n&1&&(h.data={apiData:{id:e[0].id,organization_id:e[0].organization_id,year_month:e[0].yearMonth},buttons:[],scope:"current_month_outlet_trx_only_days",columns:e[0].columns}),s.$set(h);const f={};n&1&&(f.data={apiData:{id:e[0].id,organization_id:e[0].organization_id,year_month:e[0].prevYearMonth},buttons:[],scope:"current_month_outlet_trx_only_days",columns:e[0].columns}),i.$set(f);const v={};n&1&&(v.data={apiData:{id:e[0].id,organization_id:e[0].organization_id,year_month:e[0].prevYear2Month},buttons:[],scope:"current_month_outlet_trx_only_days",columns:e[0].columns}),r.$set(v)},i(e){m||(w(o.$$.fragment,e),w(s.$$.fragment,e),w(i.$$.fragment,e),w(r.$$.fragment,e),m=!0)},o(e){z(o.$$.fragment,e),z(s.$$.fragment,e),z(i.$$.fragment,e),z(r.$$.fragment,e),m=!1},d(e){e&&(_(c),_(l),_(d),_(u),_(p),_(t)),M(o,e),M(s),M(i),M(r)}}}function I(a){var o=!1;return a.outlet!=null&&a.outlet.payment_gateway=="fiuu"?!0:o}function N(a){var o=!1;return a.outlet!=null?!0:o}function Q(a){return console.log(a),"https://iot.djtech4u.com?d="+a.name+"&location="+(a.outlet==null?"none":a.outlet.subdomain||"none")}function x(a,o,c){let{data:l}=o,s=l.inputs;var d=j+E;function u(t,r,m){R("https://iot.djtech4u.com?d="+t.name+"&location="+t.outlet.subdomain)}function i(t,r,m){R("/devices/"+t.id)}function p(t,r,m){console.log(t),console.log("transfer approved!"),m(!0,`

        <span class="">Are you sure to regenerate QR?</span>`,()=>{B({scope:"gen_static_qr",id:t.id,name:t.name},{endpoint:d+"/svt_api/webhook",successCallback:e=>{console.log(e),r()}})})}return L(()=>{console.log(l.columns)}),a.$$set=t=>{"data"in t&&c(0,l=t.data)},[l,s,u,i,p]}class se extends X{constructor(o){super(),J(this,o,x,Z,G,{data:0})}}export{se as component,le as universal};
