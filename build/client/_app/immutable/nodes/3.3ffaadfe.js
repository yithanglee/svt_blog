import{s as M,f as w,g as x,h as L,d as m,j as S,i as $,G as k,H as R,$ as F,a as y,E as q,c as P,p as A,T as D,l as G,m as J}from"../chunks/scheduler.a278e30b.js";import{S as K,i as U,b as _,d,m as g,a as h,t as v,e as b,h as X}from"../chunks/index.bc19f21f.js";import{a as C,P as O,g as N,b as V,c as Y}from"../chunks/js.cookie.c4425e19.js";import{p as z}from"../chunks/index.0132ad10.js";import{B as Q}from"../chunks/Button.4181d088.js";import{C as W}from"../chunks/Card.b772ad45.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.7922a51a.js";import{L as T,I as B}from"../chunks/Input.c1ff2188.js";import{s as j}from"../chunks/session.608d4848.js";function Z(p){let t,s="Username",n,a,u,f;function o(e){p[3](e)}let i={type:"text",name:"username",placeholder:"administrator",required:!0};return p[0]!==void 0&&(i.value=p[0]),a=new B({props:i}),A.push(()=>X(a,"value",o)),{c(){t=w("span"),t.textContent=s,n=y(),_(a.$$.fragment)},l(e){t=x(e,"SPAN",{"data-svelte-h":!0}),q(t)!=="svelte-9difb2"&&(t.textContent=s),n=P(e),d(a.$$.fragment,e)},m(e,l){$(e,t,l),$(e,n,l),g(a,e,l),f=!0},p(e,l){const r={};!u&&l&1&&(u=!0,r.value=e[0],D(()=>u=!1)),a.$set(r)},i(e){f||(h(a.$$.fragment,e),f=!0)},o(e){v(a.$$.fragment,e),f=!1},d(e){e&&(m(t),m(n)),b(a,e)}}}function ee(p){let t,s="Your password",n,a,u,f;function o(e){p[4](e)}let i={type:"password",name:"password",placeholder:"•••••",required:!0};return p[1]!==void 0&&(i.value=p[1]),a=new B({props:i}),A.push(()=>X(a,"value",o)),{c(){t=w("span"),t.textContent=s,n=y(),_(a.$$.fragment)},l(e){t=x(e,"SPAN",{"data-svelte-h":!0}),q(t)!=="svelte-1nyqqaq"&&(t.textContent=s),n=P(e),d(a.$$.fragment,e)},m(e,l){$(e,t,l),$(e,n,l),g(a,e,l),f=!0},p(e,l){const r={};!u&&l&2&&(u=!0,r.value=e[1],D(()=>u=!1)),a.$set(r)},i(e){f||(h(a.$$.fragment,e),f=!0)},o(e){v(a.$$.fragment,e),f=!1},d(e){e&&(m(t),m(n)),b(a,e)}}}function te(p){let t;return{c(){t=G("Login to your account")},l(s){t=J(s,"Login to your account")},m(s,n){$(s,t,n)},d(s){s&&m(t)}}}function ae(p){let t,s,n="Sign in to our platform",a,u,f,o,i,e,l;return u=new T({props:{class:"space-y-2",$$slots:{default:[Z]},$$scope:{ctx:p}}}),o=new T({props:{class:"space-y-2",$$slots:{default:[ee]},$$scope:{ctx:p}}}),e=new Q({props:{type:"submit",class:"w-full",$$slots:{default:[te]},$$scope:{ctx:p}}}),{c(){t=w("div"),s=w("h3"),s.textContent=n,a=y(),_(u.$$.fragment),f=y(),_(o.$$.fragment),i=y(),_(e.$$.fragment),this.h()},l(r){t=x(r,"DIV",{class:!0});var c=L(t);s=x(c,"H3",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-wwn3rw"&&(s.textContent=n),a=P(c),d(u.$$.fragment,c),f=P(c),d(o.$$.fragment,c),i=P(c),d(e.$$.fragment,c),c.forEach(m),this.h()},h(){S(s,"class","text-xl font-medium text-gray-900 dark:text-white"),S(t,"class","flex flex-col space-y-6")},m(r,c){$(r,t,c),k(t,s),k(t,a),g(u,t,null),k(t,f),g(o,t,null),k(t,i),g(e,t,null),l=!0},p(r,c){const E={};c&129&&(E.$$scope={dirty:c,ctx:r}),u.$set(E);const H={};c&130&&(H.$$scope={dirty:c,ctx:r}),o.$set(H);const I={};c&128&&(I.$$scope={dirty:c,ctx:r}),e.$set(I)},i(r){l||(h(u.$$.fragment,r),h(o.$$.fragment,r),h(e.$$.fragment,r),l=!0)},o(r){v(u.$$.fragment,r),v(o.$$.fragment,r),v(e.$$.fragment,r),l=!1},d(r){r&&m(t),b(u),b(o),b(e)}}}function se(p){let t,s,n,a,u,f;return n=new W({props:{class:"w-full max-w-md",$$slots:{default:[ae]},$$scope:{ctx:p}}}),{c(){t=w("main"),s=w("form"),_(n.$$.fragment),this.h()},l(o){t=x(o,"MAIN",{});var i=L(t);s=x(i,"FORM",{class:!0});var e=L(s);d(n.$$.fragment,e),e.forEach(m),i.forEach(m),this.h()},h(){S(s,"class","flex justify-center")},m(o,i){$(o,t,i),k(t,s),g(n,s,null),a=!0,u||(f=R(s,"submit",F(p[2])),u=!0)},p(o,[i]){const e={};i&131&&(e.$$scope={dirty:i,ctx:o}),n.$set(e)},i(o){a||(h(n.$$.fragment,o),a=!0)},o(o){v(n.$$.fragment,o),a=!1},d(o){o&&m(t),b(n),u=!1,f()}}}function ne(p,t,s){let n="",a="";async function u(){var i=V+Y,l=await z({id:0,username:n,password:a,scope:"sign_in"},{endpoint:i+"/svt_api/webhook"});if(console.log(l),l.status=="ok"){await C.set(O,l.res,{sameSite:"Lax"}),console.log("login user"),j.login({username:n,token:JSON.stringify(l.res),role_app_routes:l.role_app_routes,id:l.user_id});let r=await C.get(O);console.log("check cookite js"),console.log(r),N("/dashboard")}else l.status=="error"&&(j.logout(),C.remove("user"),C.remove(O),await C.remove(O),N("/"))}function f(i){n=i,s(0,n)}function o(i){a=i,s(1,a)}return[n,a,u,f,o]}class $e extends K{constructor(t){super(),U(this,t,ne,se,M,{})}}export{$e as component};
